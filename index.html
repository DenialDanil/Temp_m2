<!DOCTYPE html>
<html><head><meta charset="utf-8"><title>Temp_stat</title>
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
<style>body{background:#000;color:#0f0;font-family:Arial;text-align:center;margin:0;}</style>
</head><body>
<h1>Температура та вологість з ESP32</h1>
<div id="chart" style="width:95%;height:80vh;margin:auto;"></div>
<h2 id="last">чекаємо дані...</h2>

<script>
const URL = "https://temp-stat2.onrender.com/data";  // ← твоя адреса

Plotly.newPlot('chart', [{
  y: [], name: 'Температура °C', line: {color: 'red'}
}, {
  y: [], name: 'Вологість %', yaxis: 'y2', line: {color: 'cyan'}
}], {paper_bgcolor:'#000',plot_bgcolor:'#000',font:{color:'#0f0'}});

setInterval(async () => {
  try {
    const d = await fetch(URL).then(r => r.json());
    const t = new Date().toLocaleTimeString();
    Plotly.extendTraces('chart', {y:[[d.temp],[d.hum]], x:[[t],[t]]}, [0,1]);
    document.getElementById("last").innerHTML = `${d.temp}°C | ${d.hum}% | ${t}`;
  } catch(e) {}
}, 8000);
</script>
</body></html>
