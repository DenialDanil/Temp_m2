<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Temp_stat</title>
  <script src="https://cdn.plot.ly/plotly-2.35.2.min.js"></script>
</head>
<body style="background:black; color:white; margin:0; padding:20px;">
  <h1 style="text-align:center;">Temp_stat — живі дані</h1>
  <div id="chart" style="width:100%; height:80vh;"></div>

  <script>
    const URL = "https://temp-stat2.onrender.com/data";

    Plotly.newPlot('chart', [{
      y: [], type: 'scatter', name: 'Температура °C', line: {color: 'red'}
    }, {
      y: [], type: 'scatter', name: 'Вологість %', yaxis: 'y2', line: {color: 'cyan'}
    }]);

    setInterval(() => {
      fetch(URL + "?t=" + Date.now())
        .then(r => r.json())
        .then(d => {
          const now = new Date().toLocaleTimeString();
          Plotly.extendTraces('chart', { y: [[d.temp], [d.hum]], x: [[now], [now]] }, [0, 1]);
        })
        .catch(() => console.log("чекаємо дані..."));
    }, 8000);
  </script>
</body>
</html>
