<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Temp_stat – вся історія</title>
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
  <style>body{background:#000;color:#0f0;font-family:Arial;text-align:center;}</style>
</head>
<body>
  <h1>Temp_stat — дані зберігаються назавжди</h1>
  <div id="chart" style="width:95%;height:80vh;margin:auto;"></div>

<script>
<script>
  const URL = "https://temp-stat2.onrender.com/history";  // ← твоя адреса бекенду

  async function update() {
    const res = await fetch(URL);
    const data = await res.json();
    const x = data.map(d => d.ts);
    Plotly.react('chart', [
      {x, y: data.map(d=>d.temp), name:'Температура °C', line:{color:'#f44'}},
      {x, y: data.map(d=>d.hum),  name:'Вологість %',     yaxis:'y2', line:{color:'#44f'}}
    ], {
      title: 'Вся історія вимірювань',
      yaxis: {title: '°C'}, yaxis2: {title: '%', overlaying:'y', side:'right'},
      paper_bgcolor: '#000', plot_bgcolor: '#111', font:{color:'#0f0'}
    });
  }
  update();
  setInterval(update, 15000);
</script>
</body>
</html>
